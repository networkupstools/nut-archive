__FTS 502, December 23. 1996__

== Communicating with Fortress Using the RS232 Port 



This FTS explains how to
communicate with standalone LI 520, 720, 1020, and 1420 Fortress
models using the DB9S communication port. (This FTS is *not *for
rackmount models.) This document provides information for all
Fortress software versions through 1.00. +



Fortress includes a free
CheckUPS&reg; II Suite software package for power
monitoring and for automatic shutdown during long power outages. If
you are planning to use this software, see the instructions and the
online manual you received with the CheckUPS II CD. +
This document begins with a list of ways you can use the RS232 port.
It then describes how to set up full-duplex RS232 communication
between your computer and Fortress so you can send commands and
receive messages from the UPS. This document also explains how to use
the commands and Fortress' parameters to control Fortress operation
or to display information about the Fortress and power
conditions. +
If you have any questions about Fortress communication, call the
nearest Best Power office, or call Best Power's Worldwide Service at
1-800-356-5737 (U.S. and Canada) or 1-608-565-2100.
Best Power makes no
claim on trade names of application products mentioned in this
publication. +
Best Power's trademark ownership extends to its own products
only. +



*FPT-0502B* +
*Copyright 1996, Best Power. All rights reserved.* +



__P.O. Box 280 - Necedah, Wisconsin 54646 U.S.A. &#149; 608-565-7200__ +
__Toll-Free: 800-356-5794 &#149; Service Toll-Free: 800-356-5737(U.S.A. & Canada)__ +
__FAX: 608-565-2221 &#149; Service FAX: 608-565-2509__


== 100 How You Can Use the Communication Port

You can use the Fortress' RS232 communication port for several functions: +
*12 Level -- Pin 8:* +

You can use the + 12 VDC Level on pin 8 for setting an external
logic level 1. You can use this to set
a fixed input logic level in an external device. The voltage is
present whenever the Fortress is operating. +



=== CheckUPS II Software:


If you are using the free CheckUPS II software you received for
power monitoring and automatic
shutdown, the communication port is the connection point for your
CheckUPS II interface cable.
See the instructions that came with the CheckUPS II software.
CheckUPS II is also set up to work
with Windows 959 Plug and Play Sense. See step 8 in the Startup
section of the Fortress User
Guide.



=== Remote Monitoring (Relay Contacts):
Fortress has contacts that indicate when the unit is running on
battery and when it is sounding a Low Battery Alarm. You can connect
these contacts to your own alarm system or indicator for remote
monitoring. ChcckUPS II software also uses these contacts to control
the shutdown of computers or computer networks. +



Using parameter 8 1, you can decide which alarms will activate alarm
contact; see Section 503 for more information. Using parameters 80
and 88-89, you can also change the contacts from normally open to
normally closed, and you can change the delay before the battery
contact closes. See Section 504 for more information. +



=== Remote Shutdown: 

Two pins at the Fortress' DB9S port allow you to shut down your
Fortress from a remote switch.
Parameters 85-87 and 82-84 let you decide what type of signal or
contact action will cause a shut
down and how long the Fortress should delay before shutdown. See
Section 505 for more information.



=== RS232 Communication:

You can connect your Fortress to a terminal, computer, or modem
for full-duplex communication. This connection lets you send commands
to the Fortress to display values or control Fortress operation. You
can even set up your Fortress to start and shut down automatically at
the times you choose. Section 300 describes how to to set up RS232
communication, Section 400 explains how to use Fortress commands, and
Section 500 explains how to use parameters. +


== 200 Choosing a Communication Mode +

Fortress has two communication modes: RS232 Communication Mode and Extended Signal Mode. This section explains the modes and how to change them. +

=== 201 RS232 Communication Mode +

Fortress is set to the RS232 Communication Mode when you receive
it. This is the mode that your CheckUPS II Suite uses; it is also the
mode that you must use for RS232 communication. When you select this
mode, the pins at the DB9 port perform these functions: +


[options="header,autowidth",frame="all", grid="all",cols="<,<"]
|=============
|Pin	|Function
|1	|RS232 Receive Data. Receives incoming RS232 communication data.
|2	|RS232 Transmit Data. Sends outgoing RS232 communication data.
|3	|Normally open On Battery Cntact. A normally open contact that closes 15 seconds after the UPS switches to battery power. You can adjust the delay before the contact closuses, and you can change the contact to normally closed; see Section 504.
|4	|Common. The signal ground for all signal pins.
|5	|Normally Open Low Battery Contact. A normally open contact that closes during a Low Battery, Near Low Battery or Low Runtime alarm. This tells CheckUPS II and other shutdown software when to start a computer shutdown. __You can program this contact to close during other alarms; see Section 503.__ You can also change ther contact to normally closed; see Section 504.
|6	|Plug and Play Sense for Windows 95
|7	|Remote Shutdown. Shorting this pin to common turns the UPS off. See Section 505 to change what causes a shutdown and the delay before the shutdown.
|8	|Unregulated +12V isolated source.
|9	|Not Used.
|=============== 

Contacts consist of open
collector circuits capable of switching up to +40 VDC 50 mA resistive
load. Only pins I and 2 differ from Extended Signal Mode; these are
the pins that allow RS232 communication.



=== 202 Extended Signal Mode +

The Extended Signal Mode does not allow RS232 communication, but
it includes a programmable contact for remote shutdown and a pin that
produces a 12 VDC (RS232-level) signal when the unit runs on battery.
This mode is mainly for applications that require signals for your
computer software or other external equipment. + 
Only pins I and 2 change in this mode; pins 3-9 have the same
functions that they have in the RS232 Communication Mode. See the
table on the next page. +

image:images/gr000002.png["pin diagram", align=center]


Contacts consist of open
collector circuits capable of switching up to +40 VDC 50 mA resistive
load. +


=== 203 Selecting the Communication Mode +

DIP switch 4 on the back of your Fortress sets the communication
mode. The DIP switches are on the right side of the back panel as
shown below. +

image:images/gr000003.png["dipswitch locations", align=center]
  
  
To set the
communication mode, find DIP switch 4 shown. Use a *nonmetal*
object such as a toothpick to move the DIP switch to the correct
position for the communication mode you select (left for RS232 Mode,
right for Extended Signal Mode). If the UPS is on, it will beep when
you change the communication mode. *Make sure you do not
accidentally change the position of another DIP switch.* +



== 300 Starting Two-way RS232 Communication +

You can set up two-way (full-duplex) communication with the Fortress using a dumb
terminal or terminal communication program. Two-way communication
allows you to issue commands to the Fortress and to display
information on your computer or terminal's screen. The commands are
in Section 400. To set up two-way communication, follow these
steps: +

* Order an interface cable from Best Power (or call Best Power for
cable specifications). Connect this cable to the UPS and to the
terminal. (Instead of a terminal, you can use a computer with
terminal emulation software such as CROSSTALK' or Procomm-, or the
Windows Terminal function.) If you are using a terminal, note that
Fortress supports the Televideo 900 series, ADM3A and WSE 50
emulation.

.Note:
[NOTE]
=================
If you are connecting the Fortress to a modem, you must
configure the modem properly. Set +
up the modem to ignore RTS and CTS signals (disable hardware
handshaking). Enable sup +
port for X/ON X/OFF software handshaking. At the Fortress, parameters
73 and 74 enable +
software handshaking; unless you have changed the settings of these
parameters, Fortress is +
already set up for software handshaking.
==================

* Start the terminal or run terminal emulation software on your
computer. 
* Set the ten-ninal or terminal emulation software for the
following:
* Set the ten-ninal or terminal emulation software for the following: • FULL DUPLEX • 1200 baud (see note in step 4) • 8 data bits and 1 stop bit • No parity
* Press <ENTER> at your keyboard. You should receive a => prompt. Press <ENTER> a few times to make sure the Fortress responds.
.Note:
[NOTE]
====================
If you want to change the baud rate at which the Fortress communicates, follow these steps:
====================
.... Set your
computer or terminal baud rate to 1200 temporarily so you can
communicate with the Fortress. +
.... Find the DIP switches on the back of the Fortress; then, find
DIP switch 1. +
image:images/gr000004.png["dip switch detail"] +
.... If DIP switch I is
set to the right, the Fortress baud rate will stay 1200 until you
change the DIP switch setting. If DIP switch I is set to the left
as it is in the drawing, the Fortress baud rate depends on the
setting of parameter 70. When the Fortress is shipped, parameter
70 is also set to 1200. To change the DIP switch setting, use a
*nonmetal* object such as a toothpick to move DIP switch I
from one side to the other; if the UPS is on, it will beep.
*Make sure you do not accidentally change the position of
another DIP switch. +
.... Establish communication with the Fortress. Then, enter the
Service password by typing *password 2639*<ENTER>. +
.... To display baud rate (parameter 70), type *display 70*
<ENTER>. If you have never changed the parameter
setting, the display will show "70 Baud 2)1200." Setting 0 300, 1
= 600, and 2 = 1200. +
.... To change the setting type *program 70 <new setting>*
<ENTER>. Example: To change the baud rate to 300, type
*program 70 0* <ENTER>. +
.... Clear the password by typing clearpassword <ENTER>. 




* To control or monitor
the Fortress, simply type the command you need and press
<ENTER>. (See Section 402 for a list of commands.) You can use
the following keystrokes as you type commands or view
displays:



image:images/gr000005.png["control characters"] +



== 400 Using
Commands to Communicate with the Fortress*


This section explains how to communicate with the Fortress in RS232 mode. See
Section 300 to start two-way communication. If you plan to use
CheckUPS II software, see the online manual on the CheckUPS CD for
more information about UPS monitoring and control. +


=== 401 Passwords

Before you can enter some commands, you must enter a password, 'Mere are two levels
of passwords: User and Service. To enter the User password, type the
following at the => prompt: *pw 377 <ENTER>.* After you
enter the password, the prompt will change to "User=>." The
Service password is for more advanced parameter programming and for
service functions. Before you change parameters, you should make sure
you understand the effects of the change; if you are not sure, call
Best Power for help. To enter the Service password, type *pw 2639
<ENTER>.* The prompt will change to "Serv=>". +


=== 402 Commands +

You can only enter commands if the Fortress is in the RS232 Communication Mode and
you are not using CheckUPS II. To enter a command, simply type it in
and press <ENTER>. You can type the command in uppercase or
lowercase, and you can use the whole command or the short form, or
you can abbreviate the command as long as you include the letters in
the short form. You can also enter more than one command at once if
you put a semicolon between commands. The table on the next few pages
shows each command, its short form, the password required (if any),
and what the command does. +


image:images/gr000006.png["commands"] +

image:images/gr000007.png["commands"] +

image:images/gr000008.png["commands"] +
 
=== 403 Help Commands

You can use some commands to help you learn more about how the
Fortress works. These commands are *alarmshelp, alarmstatus, and
commands.*

==== AlarmsHelp and AlarmStatus Commands

The *alarmshelp and alarmstatus* commands display a list of
alarms with their letters and codes, the current status of the alarm
(active or off), and the relay setting. See the sample list
below: +

image:images/BP0001.png["alarm list"] +



==== Commands +

When you enter *commands,* the terminal will display a list of
commands. +

.Note:
[NOTE]
=========================
The following commands in the displayed list are not implemented for
Fortress: *alarmlog, chargermode, clearlogs, help, inverterlog,
and logs.* If you use the help command, you will be referred to
the Fortress User Guide; if you use the other commands, you will
receive the message "Command not implemented." The command list
also shows commands that you cannot use without a password higher
than the Service password. See Section 402 for a list of valid
commands and the passwords you need to use them. +
==========================

=== 404 Status Commands +

The *alarmstatus* command shows the same alarm information
that the *alarmshelp* command does. See the sample above. The
*status and contstatus* commands display several Fortress
parameter values, active alarins, and other status information. The
next page shows an example of a status display. +






__System status report for L1520VA [Unit ID - parameter 15] (Serial Number) Friday, July
12, 1996 - 12:32:41__ +

image:images/gr000009.png["status report"] +

Front panel: L  --| 30 +
Last battery power run duration: 25 seconds +
Active alarms: +
(None) +



In the *status*
display, the table shows the values of many Fortress parameters and
the status of Fortress operation. +
*Line Status:* "V In" and "V Out" show the input and output
voltage, "Freq" shows the output frequency, and "PF" shows the power
factor. See parameters 1, 2, 8, and 18 in Section 501 for more
information. +

*Load Status:* "I Out" shows the output current, "VA Out" shows
the output volt-amperes, "Watts" shows the output watts, and
"FullLoad%" shows the percent of the Fortress' power your equipment
(or load) is using. See parameters 4, 5, 17, and 16 in Section 501
for more information. +

*UPS Status:* "Mode" shows whether the unit is running on line
(utility power) or battery. "Tap" shows whether the UPS is using
boost (to increase a low input voltage), buck (to decrease a high
input voltage), or bypass (to condition input voltage that is at
acceptable levels). "V Batt" shows the battery voltage, and "Runtime"
shows how long the unit can run on battery power; see parameters 7
and 9 in Section 501 for more information. +

Totals: "SysHrs" shows the total nurnber of hours the Fortress has
operated. "InvMin" shows the number of minutes the Fortress has
operated on inverter (battery power) since it started. "#PwrOut"
shows how many power outages have taken place since you started the
Fortress, and "#OvrLds" shows how many times the Fortress has been
overloaded since you started the Fortress. See parameters 22, 23, 20,
and 21 in Section 501 for more information. +

*Front Panel:* This part of the status report approximates what
you will see on the Fortress front panel. In the example, "L" means
the green light (the "line" light) is on, which shows that the
Fortress is running on utility power. The two dashes behind the line
mean that the yellow light and red light are not on. If they were,
you would see a "B" (meaning the Fortress was running on battery
power) and an "A" (meaning Fortress is sounding an alarm). "30" is
the number shown on display; since the green (L) light is on, this is
the percent of the UPS' total power that your equipment is using. See
the Fortress User Guide for more information about the display. +

*Last Battery Power Run Duration:* This entry shows how long the
UPS ran on battery power last time there was a power outage or severe
power problem. +

*Active Alarms:* The last part of the status report shows which
alarms are active. If the UPS is not sounding any alarms, the report
will show "(None)" as it does in the example. +


The *contstatus* command shows the same report as the status
command, but it continuously updates the information until you press
a key. +


=== 405 Parameter Commands +

This section describes the commands you can use to display and
program parameters. +
When you use the commands described below, you must often specify a
parameter. To do this, you can enter the parameter number or its
name. The Parameter Table in Section 501 shows the name you can use
for each parameter; you can also use the short form shown in the
table, or you can enter an abbreviation of the name as long as you
include the letters in the short form. (You can also abbreviate
commands; see Section 402.) +
The *display, contdisplay, parameters and paramkeywords* commands let you display parameters. The program command changes
parameter values. +

==== Display +

The *display (or d)* command lets you display specific
parameters on your computer or terminal. For example, if you enter
*display 0, display time or d t,* your computer or terminal will
display parameter 0 (below). Notice that you must leave a space
between the command and the parameter number or name. +

__00 Time 14:42:21__ +


If you enter more than one parameter name or number after this command, your
computer or terminal will display those parameters. For example, if
you enter d time 38 10, the display will show parameters 0, 38, and
10: +

__00 Time 14:42:21__ +
__38 LowRuntime 5__ +
__10 Date 08/30/96__ +

Notice that you can mix names and numbers, and you can list the parameters in any
order. +
If you have already displayed a parameter, you can display the next
parameter by entering *display* alone.


==== Contdisplay +

The *contdisplay (or cd)* command works like the *display* command, but it constantly updates the parameter values displayed
until you press a key.


==== Parameters +

Like the *display* command, the *parameters (or p)* command will display a parameter if you enter a parameter number
or name after the command. For example, If you enter *parameter 0,
parameter time, or p t,* your terminal or computer will display
something like the sample on the next page. +

__00 Time 14:42:21__

However, the *parameters* command works differently when you
enter it alone or when you enter more than one parameter after the
command. When you enter *parameters (or p)* alone, your computer
or terminal displays all of the user-level and service-level
parameters shown in Section 501. +
To display a range of parameters, enter the starting and ending
parameters after the command. Instead of showing just the parameters
you list (as the *display* command does), the *parameters* command will display all of the parameters in between. For
example, if you enter *parameter 0 5, parameter time vaout, or p t
va,* your computer or terminal will display parameters 0 through
5: +

__00 Time 14:42:21__ +
__01 V In__ +
__118.2__ +
__02 V Out__ +
__118.2__ +
__03 *L - A 00__ +
__04 I__ +
__Out 11.8__ +
__05__ +
__VA Out__ +   
__345__ +



==== Paramkeywords +

The *paramkeywords (or pk)* command works like the *parameters* command, but it also displays the keyword or name of each
parameter you display. (The keyword is the name shown in Section
501.) For example, if you enter *paramkeywords time vaout (or pk t
va),* your computer or terminal will display a list like this
example: +

__00 Time 14:43:59 Time__ +
__01 V In 118.2__ +  
__acVoltsIn__ +
__02 V__ +
__Out__ +
__118.8__ +
__acVoltsout__ +
__03 *L - A | 00 DiSplay__ +
__04 I Out 11.8 acampsiOut__ +
__05 VA Out 345 VAout__ +


Notice that some
letters are capitalized in the keywords on the right. These letters
make up the short form of the parameter name (or keyword). +
To display all of the user and service parameters and their keywords,
enter *paramkeywords (or pk)* alone. +


==== Program +


Before you can program or change some parameters, you must enter
the User or Service password. (See Section 40 1.) Some parameters
cannot be changed; see Section 5 0 1. +
The *program (or pr)* command lets you program parameters.
Simply type *program,* the parameter number or name, and the new
value. +
Example: If you enter *program time 09:30:00,* the time will be
changed to 9:30 a.m. If you then display the parameter using the
command *display time,* you will see a display similar to
this: +

__00 Time 09:30:00__ +


=== 406 The Format Commands

The three *format* commands tell the Fortress to send system status and metering
information in a fixed format. You can incorporate this information
into your computer system's software without any text or punctuation.
There are three commands: *format (f), formatconfig* (fc), and
*formatparam (fp).* +
For the *format* (f) command, the data string is made up
of: +

* two carriage returns and a line feed,
* 80 ASCII characters that represent 40 hexadecimal bytes of information, and
* two more carriage returns and a line feed. +



The characters in the
string represent the data shown in the table on the next two pages.
For an example +
of the string, see page 19. +


image:images/gr000010.png["f string details"] +

image:images/gr000011.png["f string details"] +


For the *formatconfig* (fc) command, the data string is made up of

* a carriage return and a line feed, +
* the data string defined in the following table, and +
* another carriage return and a line feed. +



*	.Note:
[NOTE]
==================
The header and the first 70 characters in the string are always
present; if the information required for one of these characters
is not available, the characters will be filled with a question
mark (?). After character 70, all characters are optional. This
means that if the information is not available, the characters are
not included in the string; however, backslashes will appear
between fields of information even if there is no information in a
particular field. +
===================


The table on the next two pages shows the fc-string fields in the
order in which they appear. The table does not identify the character
position because this depends on the length of some fields and the
number of fields that are present. For an example of the string with
the fields identified, see page 19. +


image:images/gr000012.png["fc string details"] +

image:images/gr000013.png["fc string details"] +


For the *formatparam (fp)* command, the data string is made up of

* a carriage return and a line feed, +
* the data string defined in the following table, and +
* another carriage return and a line feed. +

.Note:
[NOTE]
=====================
The header and the first 124 characters in the string are always
present; if the information required for one of these characters
is not available, the characters will be filled with a question
mark (?), All characters after character 124 are optional. This
means that if the information is not available, the characters are
not included in the string; however, backslashes will still appear
between fields of information even if there is no information in a
particular field. +
=====================



The table on the next two pages shows the fp-string fields in the
order in which they. appear. The table does not identify the
character position because this depends on the length of some fields
and the number of fields that are present. For an example of the fp
string with the fields identified, see page 19. +


image:images/gr000014.png["fp string details"] +

image:images/gr000015.png["fp string details"] +


*Examples:* +
Below you will find examples of the strings sent in response to
the *format (f)* command, the 
*formatconfig (fc)* command, and the *formatparam (fp)*
command. In these examples, some parts of the 
string are shaded to show you the fields or groups of information.
The shading is not part of the data string. +
*__The format (f) command):__* +

image:images/gr000016.png["f command example"] +

*__The formatconfig (fc) command:__* +

image:images/gr000017.png["fc command example"] +

*__The formatparam (fp) command:__* +

image:images/gr000018.png["fp command example"] +


== 500 Using Parameters +

=== 501 Parameter Table +

The table on the next few pages shows the parameters that you can view or program
from a terminal or computer. Some of these parameters keep track of
information (like Time or Date) or display operating and power
conditions (like voltage, current, or temperature). Other parameters,
(Like User ID) let you program the Fortress for special operating
conditions. +

When you use the Fortress commands to display and program parameters,
you can identify the parameter with either its number or name. If you
use the name, you can enter the whole parameter name or just the
letters in the short form. (See the Name column in the parameter
table). +

Passwords restrict access to some parameters; see the "Password to
Change" column in the table and Section 40 1. +

image:images/gr000019.png["warning"] +

image:images/gr000020.png["parameter table"] +

image:images/gr000021.png["parameter table"] +

image:images/gr000022.png["parameter table"] +

image:images/gr000023.png["parameter table"] +

image:images/gr000024.png["parameter table"] +

image:images/gr000025.png["parameter table"] +

image:images/gr000026.png["parameter table"] +

image:images/gr000027.png["parameter table"] +



=== 502 Automatic Startup and Shutdown (Parameters 90-93) +

If you do not want the Fortress to run constantly, you can program it to startup
and shut down automatically using parameters 0, II, and 90-93. Just
follow the steps below. +

. You must enter the Service password before you can change
parameters 90-93. To enter the password, use the command *pw
2639*. +
. Using the *display* command, display parameters 0 and 11 to
make sure the time and the day of the week are correct. (Note that
parameter 0 shows the time in 24-hour or military time.) If both
parameters are correct, go to step 2. If not, follow steps a-b: +

.. Use this
command to change the time: *program time <new time>.* Be sure to use the 24-hour system. For example, if the time is
9:30 a.m., use the command *program time 09:30.* If the time
is 7:00 p.m., use the command *program time 19:00.* +
.. To change the day of the week, use this command: *program
day <new day of week>.* For the new day of the week, 0 =
Sunday, I = Monday, 2 = Tuesday, 3 = Wednesday, 4 = Thursday, 5 =
Friday, and 6 = Saturday. For example, if the day of the week is
Monday, use the command *program day 1.*

. Parameters 90-93 let you set up automatic startup and
shutdown. +
. Parameter 91 (ontiniedays or ontd) lets you choose which days you
want the Fortress to automatically shut down. When you receive the
Fortress, this is set to 0, which means none of the days have been
selected. +

If you want the Fortress to start automatically every day, use this
command: *program ontd 127.* If you only want Fortress to
operate some days, use the table below. In the right column enter "0"
for each day you do not want the Fortress to operate. For the days
you do want the Fortress to operate, enter the day's value from the
second column. Then, add the right column and use this command to
change the parameter setting: *program ontd <total of right
column>.* +

image:images/gr000028.png["day of week table"] +

__Example: __If you wanted the Fortress to operate
automatically Monday through Friday, you would write "0" next to
Sunday and Saturday and the values next to the other day. 0 + 2 + 4 +
8 + 16 + 32 + 0 = 62, so you would use the command *program ontd
62.*

. Parameter 90
(powerontime or ont) sets the time you want the Fortress to start
automatically. When you receive the Fortress, this parameter is set
to 8:00 a.m. If you want the Fortress to start at a different time,
use this command: *program ont <new start time>.* Be sure
to use 24-hour or military time. For example, if you want the
Fortress to start at 9:00 a.m., use the command *program ont 09:00.*
If you want the Fortress to start at 3:00 p.m., use the command
*program ont 15:00.*
. Parameter 92 (powerofftime or offt) sets the time you want the
Fortress to shut down automatically. When you receive the Fortress,
this parameter is set to 17: 00, which is 5: 00 p.m. If you want the
Fortress to shut down at a different time, use this command:
*program offt <new shutdown time>.* Be sure to use 24-hour
or military time. +
. Parameter 93 (offtimedays or oftd) lets you choose which days you
want the Fortress to shut down. When you receive the Fortress, this
is set to 0, which means none of the days have been selected. If you
want the Fortress to shut down automatically every day, use this
command: *program oftd 255.* +
If you only want Fortress to shut down some days, use the table
on page 29 to calculate the setting just as you did for parameter 9 1. __If you want the Fortress to start and shut down on the same
days, you can use the setting you calculatedfor parameter 91.__
. Clear the Service password using the clearpassword
command.

=== 503 Choosing Which Alarms Enable the Alarm Contact (Parameter 81) +

When you receive the Fortress, the alann contact (pin 5) only closes for the Low
Battery, Near Low Battery, and Low Runtime alarms. __This setting is
important ifyou are using yourfree CheckUPS II Suite software
pack-age or other automatic shutdown software.__ However, if you
are not using CheckUPS and you would like other alarms to close the
contact, you can use parameter 81 to determine which alarms will
close the contact. (See Section 504 for information about other
settings that affect the alarm contact.) +

__No matter how you program parameter 81,when the UPS is off, the alarm contact will be open.__ +

To program parameter 8 1, follow these steps: +

1. Enter the Service password using the command *password 2639*. +
2. Display parameter 81 using the *display 81* command. +
3. The table on the next page will help you calculate the new
parameter settmig based on the alarms that you want to activate the
contact. If you do not want any of the alarms to activate the
contact, write "0" for the total. If you want some of the alarms to
activate the contact, see the table to find the Alarm Value for each
of these alarms; write the value for these alarms in the third column
of the table. Write "0" for alarms that should not activate the
contacts. Then, add the numbers in the third column. For example, to
enable alarms A (Low Battery), B (Near Low Battery), and C (High
Battery),write "I" for alarm A, "2" for alarm B, "4" for alarm C, and
"0" for the rest of the alarms. Ile total is 7. +

__If you are using the Fortress with an AS/400, you should ONLY
enable the alarm contact for the Low Battery, Near Low Battery, and
Low Runtime alarms. In the blanks, A = 1, B = 2, D=8, and C and E- K
= 0. The total = 11.__ +


image:images/gr000029.png["alarm table"] +


4. Now, change the parameter 81 setting to the total you found in step 3. To do this,
use the *program 81 <new setting>* command. +
__Example:__ If you would like to activate the contact for alarms
A, B, and C and your total in step 3 was 7, enter the command
*program 81 7*. +
5. Use the *display 81* command to display the parameter once
more and confirm that you have entered the correct setting. +
6. Clear the Service password using the *clearpassword* or
*cp* command. +



=== 504 Changing the Settings for Alarm and Battery Contacts (Parameters 80 and 88-89) +

Parameters 80 and 88-89 let you program how the alarm and battery contacts operate. +


==== Alarm Contact (Pin 5) +

When you receive the Fortress, a Low Battery Alarm will cause the
normally open contact on pin 5 to close to common (pin 4). (Section
503 tells you how to activate the contact for other alarms.) The
contact is normally open because parameter 80 is set to 0)Neg when
you receive the Fortress. If you would like the contact to be
normally closed and to open during the alarm, you must change
parameter 80 to 1)Pos. __No matter how you program parameter 80,
when the UPS is off, the alarm contact will be open.__ To change the parameter, follow these
steps: +

. Enter the Service password using the command *password 2639*. +
. Program parameter 80 to 1)Pos using this command: *program 81 1*. +
. Clear the password using the *clearpassword* or *cp* command. +

==== On Battery Contact(Pin 3) +

When you receive the Fortress, the on battery contact (pin 3) is
a normally open contact that closes 15 seconds after the Fortress
starts running on battery power. Using parameter 88, you can change
the contact to a normally closed contact. Using parameter 89, you can
adjust the 15-second delay. +

Parameter 88 is set to 0)Neg when you receive the UPS. This means
that the contact is normally open and that it closes when the
Fortress runs on battery power. To change the contact to a normally
closed contact that opens when the Fortress runs on battery, follow
these steps: +

. Enter the Service password using the command *password 2639*. +
. Program parameter 88 to 1)Pos using this command: *program 88 1*. __No matter how you program parameter 88, when the UPS is off, the inverter contact will be open.__ +
. Clear the password using the *clearpassword* or *cp* command.

After the Fortress begins running on battery power, parameter 89
determines how long the Fortress will wait before closing the on
battery contact. When you receive the Fortress, this parameter is set
to 15 seconds. You can decrease the delay to as little as 0.1 seconds
or increase it to as much as 25.5 seconds. To do this, follow these
steps: +

. Enter the Service password using the command *password 2639*. 
. To change the delay, enter the command *program 89 <new delay in seconds>*. For example, if you want the delay to be 20
seconds instead of 15 seconds, enter *program 89 20*. +
. Clear the password using the command *clearpassword* or *cp*. +


=== 505 Changing Remote Shutdown Settings (Parameters 82-84 and 85-87) +

==== Pin 7 Shutdown 

The Remote Shutdown available on pin 7 lets you shut down the
Fortress' output power through a remote switch. The switch must have
a set of contacts that can short pin 7 on the UPS communication port
to pin 4 (common). (Use a shielded, single twisted pair cable to
connect your switch to these pins.) The connection will shut down the
UPS' output power to the protected equipment. When this happens, the
UPS will sound alarm "Sd" for "shutdown" (Morse code alarm H). When
you are ready to restart the UPS, the shutdown switch must remove the
connection to pin 7 on the UPS communication port. Then, you can
press the ( | ) button to restart the UPS. +

You can change the way this feature operates by using parameters 85,
86, and 87. +

Parameter 85 determines whether this shutdown works with a normally
open or normally closed switch. When you receive the Fortress, it is
programmed to expect a normally open switch, and the Fortress shuts
down when the switch input is shorted to pin 4. You can change the
Fortress to work with a normally closed switch. To do this, you must
change the setting of parameter 85 from 0)Neg to 1)Pos. Follow these
steps: +

. Enter the Service password using the command *password 2639*. +
. Change the parameter setting using the command *program 85 1*. +
. Clear the password using the command *clearpassword* or *cp*. 

Parameter 86 determines
how long the shutdown signal should be. In some environments with a
lot of electrical noise, the noise could mimic the shutdown signal
and cause a Fortress shutdown. To avoid this problem, you can
increase the amount of time that the signal must be present before
Fortress recognizes it. When you receive your Fortress, this
parameter is set to 0.2 seconds, By changing the parameter value, you
can decrease the required signal length to 0.1 seconds or increase it
to as much as 25.5 seconds. To change the value, follow these
steps: +

. Enter the Service password using the command *password 2639.*
. Change the parameter setting using the command *program 86
<new value in seconds>*. For example, if you want to change
the parameter value to 2 seconds, you would use the command
*program 86 2*. +
. Clear the password using the command *clearpassword* or
*cp*. +


After the Fortress recognizes a shutdown signal, parameter 87
determines how long the Fortress will wait before shutting down. When
you receive your Fortress, this parameter is set to 0.1 seconds. By
changing the parameter value, you can increase the delay to as much
as 2000 seconds (33 minutes). Follow these steps: +

. Enter the Service password using the command *password 2639*. +
. Change the parameter value using the command *program 87 <new delay in seconds>*. For example, if you want the Fortress to delay 3 seconds, use the command *program 87 3*. +
. Clear the password using the command *clearpassword* or *cp*. +


==== Pin 1 Shutdown +

If your Fortress is set to Extended Signal communication mode
(see Section 200), remote shutdown is also available on pin 1. If the
UPS is using battery power, a +12-volt signal applied to the pin for
5 seconds will shut down the UPS 30 seconds later. The UPS willl
automatically restart when the power outage ends (unless you have
changed parameter 39). +

You can change the way this feature operates by using parameters 82,
83, and 84. +

Parameter 82 determines the type of signal on pin 1 that will start a
Fortress shutdown. When you receive the Fortress, this is programmed
to 0)Neg, which means ground or a -12V input causes the shutdown. If
you change the parameter to 1)Pos, a +12V input shuts down the UPS.

.Note:
[NOTE]
==================
+12V is available on pin 8 of the Fortress' port. +
==================

. Enter the Service password using the command *password
2639*. +
. Change the parameter value using the command *program 82
1*. +
. Clear the password using the command *clearpassword* or
*cp*. +


''''

Graciously scanned and provided to the NUT Protocol Library by Chris McKinnon.

